{% extends 'projects_shown/base.html' %}
{% load static %}

{% block title %}
<title>Project</title>
<link rel="stylesheet" href="{% static 'projects_shown/css/project.css' %}">
{% endblock title %}

{% block body %}
<div class="container">
    <div class="home-page">
        <a href="{% url 'projects_shown:index' %}"><i class="fa-solid fa-house"></i></a>
    </div>

    <h2>{{ project.name }}</h2>
    <h3>Token: {{ project.token }}</h3>

    <div class="link">
        <h3>Link: <a href="{{ project.link }}" target="_blank">{{ project.link }}</a></h3>
    </div>

    <div class="notes">
        <h2>Notes</h2>
        <form method="post" action="{% url 'projects_shown:add_text' project_name=project.name %}">
            {% csrf_token %}
            <textarea class="text-area" name="text-area">{{ project.notes }}</textarea>
            <br>
            <button type="submit">Save</button>
        </form>
    </div>

    <div class="feature">
        <h2>Features</h2>
        <form method="post" action="{% url 'projects_shown:add_feature' project_name=project.name feature=feature_form.feature_add.value %}">
            {% csrf_token %}
            {{ feature_form.feature_add }}
            <button type="submit">Add</button>
        </form>
    </div>

    <div class="feature-list">
        <h2>Features List</h2>
        <div class="feature-items">
            {% for f in features.all %}
            {% if not f.feature_done %}
            <div class="feature-item">
                <h3>{{ forloop.counter }}-{{ f }}</h3>

                <form method="post" action="{% url 'projects_shown:feature_done' project_name=project.name feature_id=f.id %}">
                    {% csrf_token %}
                    <button type="submit" class="done-btn">+</button>
                </form>

                <form method="post" action="{% url 'projects_shown:feature_delete' project_name=project.name feature_id=f.id %}">
                    {% csrf_token %}
                    <button type="submit" class="delete-btn"><i class="fa-solid fa-trash"></i></button>
                </form>
            </div>
            {% endif %}
            {% endfor %}
        </div>
    </div>

    <div class="done-feature-list">
        <h2>Done Features</h2>
        <div class="done-feature-items">
            {% for df in done_features %}
            <h3>{{ forloop.counter }}-{{ df }}</h3>
            {% endfor %}
        </div>
    </div>

    <div class="project-finished">
        <form method="post">
            {% csrf_token %}
            <a href="{% url 'projects_shown:sure' project_name=project.name %}" class="finish-a">Project Finished</a>
        </form>
    </div>
</div>
{% endblock body %}
